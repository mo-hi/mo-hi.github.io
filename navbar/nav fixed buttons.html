<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Mario Hamidi">
    <title>nav.js buttons</title>
    <link rel="stylesheet" href="css/nav.css">
    <link rel="stylesheet" href="css/navColors.css">
    <link rel="stylesheet" href="../basis/css/b.css">
    <style>
        :root       {--color-background: #f0f0f0;--color-text: #444;}
        body        {background-color: var(--color-background); color: var(--color-text);}
        h2.sticky   {background-color: var(--color-background); color: var(--color-text);}
        textarea    {background-color: var(--color-background); color: var(--color-text);}
    </style>
</head>
<body class="academic wr-800-400">
    <div id="id-nav">
        <div class="fixed wr-800-400 top-0">
            <nav>
                <a href="" onclick="">Home</a>
                <a href="" onclick="">Edit</a>
                <drop>
                    <a onclick="_nav_toggleDown(this)">Stuff</a>
                    <down>
                        <a href="" onclick="">Link 1</a>
                        <a href="" onclick="">Link 2</a>
                        <a href="" onclick="">Link 3</a>
                    </down>
                </drop>
                <a class="btn blue mt-7 mx-4" onclick="DownloadFile('FileName.txt')">Save File</a>
                <a class="btn blue mt-7 mx-4" onclick="UploadFile()">Open File</a>
                <a class="btn blue mt-7 mx-4" onclick="UploadFiles()">Open multiple Files</a>
            </nav>
        </div>
    </div>  

    <p>&nbsp;</p>             <!--  without top and left attribute, position:fixed will attach to this 'nearest' elemet. -->
    <h2 class="inline-block">nav.css</h2>
    <h2 class="inline-block not-bold"> (with buttons download and upload)</h2>
    
    <div id = 'id-start' class="auto-fill">
        <!-- filled via script-->
    </div>

    <p>
        The navbar of this page contains buttons for file upload and download. 
    </p>
    <p>
        The button style is defined in <c>basis/css/b.css</c> and invoked by the <c>class="btn blue mt-6"</c>.
        The classes have no effect on the functionality of the buttons, it only styles them. I. e. you can attach any
        function to the <c>onclick</c> attribute of any div element for file download or upload.
    </p>
    <p>
        Input for the download button is the text in the following textarea. The file will be saved (downloaded) with 
        the content of the textarea.
    </p>
    <textarea id="id-textarea" class="h-160 w-100 auto-fill" placeholder="Type here the text to be downloaded as file..."></textarea>
    <p>
        Output for "open file" will be logged to the console. The output for "open another file" will be 
        shown below.
    </p>
    <div id="id-open-another-file-output" class="h-200 border"></div>
    <br>
    HTML
    <div id="id-show" class="h-300"></div>

    JS 
    <div id="id-show-script" class="h-450"></div>

    <div id = 'id-fixed' class="auto-fill">
        <!-- filled via script-->
    </div>

    <div id = 'id-click' class="auto-fill">
        <!-- filled via script-->
    </div>

    <br><hr>
    <section>
        <p id="id-end">
            {{id-end}}
        </p>
    </section>
    {{very-end}}
    </body>
    <!-- js libs -->
    <script src="../basis/js/b.js"> </script>

    <!-- this project -->
    <script src="js/nav.js"></script>

    <!-- HTML Auto Fill Text -->
    <script src="js/textNav.js"></script>
    <script src="../textGeneral.js"></script>
    
    <script id = "id-script">
        function DownloadFile(fileName) {
            let fileContent = document.getElementById('id-textarea').value;
            clsFiles.download(fileContent, fileName)
        }

        function UploadFile() {
            clsFiles.upload(function(fileReader, file) {
                let output = ""
                output += "File name: " + file.name + "\n\n";
                output += "File content:\n" + fileReader.result;

                document.getElementById('id-open-another-file-output').innerText = output;
            });
        }

        function UploadFiles() {
            clsFiles.uploadMultiple(function(fileReaders, files) {
                let output = "Files uploaded:\n";

                for (let i = 0; i < files.length; i++) {
                    output += "File name: " + files[i].name + "\n";
                    output += "File content:\n" + fileReaders[i].result + "\n\n";
                }
                document.getElementById('id-open-another-file-output').innerText = output;
            });
        }
    </script>

    <script>
        Auto_Fill(FromFile_textNav_JS)
        Auto_Fill(FromFile_textGeneral_js)

        ShowHTMLinTextArea(document.getElementById("id-nav"), document.getElementById("id-show"))
        ShowHTMLinTextArea(document.getElementById("id-script"), document.getElementById("id-show-script"))

    </script>

</html>